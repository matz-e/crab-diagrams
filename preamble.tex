\usetikzlibrary{arrows,calc,fit,positioning,backgrounds}

\usepackage{fontspec}
\setmainfont{Source Sans Pro}

\tikzset{
  >=latex,
  every path/.style={
    shorten <=2pt,shorten >=2pt,>=stealth
  },
  background rectangle/.style={fill=white},
  note/.style={
    font=\scriptsize
  },
  component/.style={
    rectangle,rounded corners,draw=black,
    text depth=0pt,
    minimum width=4cm,
    minimum height=8mm
  },
  small component/.style={
    component,
    text depth=0pt,
    font=\footnotesize,
    minimum width=20mm,
    minimum height=6mm,
  },
  dag/.style={
    component,draw=gray,line width=2pt,
    inner sep=3mm,
  },
  daglabel/.style={
    fill=white,
    text depth=0pt,
    font=\footnotesize,
    minimum height=6mm
  },
  prejob/.style={
    draw,
    minimum width=16mm,
    minimum height=6mm,
    text depth=0pt,
    font=\footnotesize,
    % append after command={
    %   \pgfextra
    %   \draw[shorten <=0pt, shorten >=0pt,black,rounded corners]%
    %   (\tikzlastnode.south east)%
    %     -- (\tikzlastnode.south)%
    %     -| (\tikzlastnode.west)%
    %     |- (\tikzlastnode.north)%
    %     -- (\tikzlastnode.north east);
    %   \endpgfextra
    % }
  },
  postjob/.style={
    draw,
    minimum width=16mm,
    minimum height=6mm,
    text depth=0pt,
    font=\footnotesize,
    % append after command={
    %   \pgfextra
    %   \draw[shorten <=0pt, shorten >=0pt,black,rounded corners]%
    %   (\tikzlastnode.north west)%
    %     -- (\tikzlastnode.north)%
    %     -| (\tikzlastnode.east)%
    %     |- (\tikzlastnode.south)%
    %     -- (\tikzlastnode.south west);
    %   \endpgfextra
    % }
  },
  mainjob/.style={
    component,
    rounded corners=0,
    minimum height=6mm,
    minimum width=25mm,
    text depth=0pt,
    font=\footnotesize,
  },
  optional/.style={
    dashed
  }
}
